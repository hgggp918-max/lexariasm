<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<title>CS Style Web Shooter - Demo</title>
<style>
    body {
        margin: 0;
        font-family: Arial;
        background: #111;
        color: white;
        text-align: center;
    }
    #lobby {
        padding-top: 100px;
    }
    canvas {
        display: none;
        background: #222;
        margin: auto;
        border: 2px solid #555;
    }
    button {
        padding: 12px 25px;
        font-size: 18px;
        cursor: pointer;
        background: #f5a623;
        border: none;
        border-radius: 6px;
    }
</style>
</head>
<body>

<div id="lobby">
    <h1>CS WEB DEMO</h1>
    <p>NPC Botlara karşı savaş</p>
    <button onclick="startGame()">Maça Gir</button>
</div>

<canvas id="game" width="800" height="500"></canvas>

<script>
const canvas = document.getElementById("game");
const ctx = canvas.getContext("2d");

let player = { x: 400, y: 250, hp: 100 };
let bullets = [];
let bots = [];
let score = 0;
let playing = false;

function startGame() {
    document.getElementById("lobby").style.display = "none";
    canvas.style.display = "block";
    playing = true;
    spawnBots();
    gameLoop();
}

function spawnBots() {
    bots = [];
    for (let i = 0; i < 5; i++) {
        bots.push({
            x: Math.random() * 760 + 20,
            y: Math.random() * 460 + 20,
            hp: 50
        });
    }
}

document.addEventListener("mousemove", e => {
    const rect = canvas.getBoundingClientRect();
    player.x = e.clientX - rect.left;
    player.y = e.clientY - rect.top;
});

document.addEventListener("click", () => {
    if (!playing) return;
    bullets.push({ x: player.x, y: player.y });
});

function update() {
    bullets.forEach(b => b.y -= 6);

    bots.forEach(bot => {
        if (bot.x < player.x) bot.x += 1;
        if (bot.x > player.x) bot.x -= 1;
        if (bot.y < player.y) bot.y += 1;
        if (bot.y > player.y) bot.y -= 1;

        if (Math.hypot(bot.x - player.x, bot.y - player.y) < 15) {
            player.hp -= 0.2;
        }
    });

    bullets.forEach(b => {
        bots.forEach(bot => {
            if (Math.hypot(bot.x - b.x, bot.y - b.y) < 15) {
                bot.hp -= 25;
                b.y = -100;
                if (bot.hp <= 0) {
                    score++;
                    bot.x = Math.random() * 760;
                    bot.y = Math.random() * 460;
                    bot.hp = 50;
                }
            }
        });
    });
}

function draw() {
    ctx.clearRect(0,0,800,500);

    // Player
    ctx.fillStyle = "cyan";
    ctx.beginPath();
    ctx.arc(player.x, player.y, 10, 0, Math.PI * 2);
    ctx.fill();

    // Bots
    ctx.fillStyle = "red";
    bots.forEach(bot => {
        ctx.beginPath();
        ctx.arc(bot.x, bot.y, 10, 0, Math.PI * 2);
        ctx.fill();
    });

    // Bullets
    ctx.fillStyle = "yellow";
    bullets.forEach(b => ctx.fillRect(b.x - 2, b.y, 4, 8));

    // HUD
    ctx.fillStyle = "white";
    ctx.fillText("HP: " + Math.floor(player.hp), 10, 20);
    ctx.fillText("SKOR: " + score, 10, 40);

    if (player.hp <= 0) {
        playing = false;
        ctx.fillText("ÖLDÜN - SAYFAYI YENİLE", 330, 250);
    }
}

function gameLoop() {
    if (!playing) return;
    update();
    draw();
    requestAnimationFrame(gameLoop);
}
</script>

</body>
</html>
